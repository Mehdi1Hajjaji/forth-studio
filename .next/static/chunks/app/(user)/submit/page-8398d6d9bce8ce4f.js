(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{5629:function(e,t,l){Promise.resolve().then(l.t.bind(l,231,23)),Promise.resolve().then(l.bind(l,5118))},5118:function(e,t,l){"use strict";l.d(t,{SubmitForm:function(){return o}});var n=l(7437),a=l(2265);let i=["TypeScript","Python","C++","Java","Go","Rust"];function o(e){let{problems:t}=e,[l,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)(null),[d,c]=(0,a.useState)(null);async function m(e){var t,l,n,a,i,s,r,d,m,h,p;e.preventDefault(),u(null),c(null),o(!0);let b=new FormData(e.currentTarget),x={problemSlug:null!==(i=null===(t=b.get("problem"))||void 0===t?void 0:t.trim())&&void 0!==i?i:"",language:null!==(s=null===(l=b.get("language"))||void 0===l?void 0:l.trim())&&void 0!==s?s:"",code:null!==(r=null===(n=b.get("code"))||void 0===n?void 0:n.toString())&&void 0!==r?r:"",notes:null!==(d=null===(a=b.get("notes"))||void 0===a?void 0:a.toString())&&void 0!==d?d:void 0,makePublic:"on"===b.get("makePublic")};if(!x.problemSlug||!x.language||!x.code){u("Please complete all required fields before submitting."),o(!1);return}try{let t=await fetch("/api/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!t.ok){let e=await t.json().catch(()=>null),l=null!==(p=null==e?void 0:e.error)&&void 0!==p?p:401===t.status?"Please sign in before submitting a solution.":"Unable to submit solution. Please try again.";u(l);return}let l=await t.json().catch(()=>null);c((null==l?void 0:null===(h=l.meta)||void 0===h?void 0:null===(m=h.evaluation)||void 0===m?void 0:m.status)==="COMPLETED"?"Submission accepted! Mentor review will appear soon.":"Submission received. Evaluation is queued."),e.currentTarget.reset()}catch(e){console.error(e),u("Unexpected error while submitting the solution.")}finally{o(!1)}}return(0,n.jsxs)("form",{className:"space-y-6 rounded-2xl border border-white/10 bg-white/5 p-6",onSubmit:m,children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsx)(s,{label:"Challenge",htmlFor:"problem",children:(0,n.jsxs)("select",{id:"problem",name:"problem",defaultValue:"",required:!0,className:"auth-input",children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select a challenge"}),t.map(e=>(0,n.jsx)("option",{value:e.slug,children:e.title},e.slug))]})}),(0,n.jsx)(s,{label:"Language",htmlFor:"language",children:(0,n.jsxs)("select",{id:"language",name:"language",defaultValue:"",required:!0,className:"auth-input",children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Choose a language"}),i.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})})]}),(0,n.jsx)(s,{label:"Solution code",htmlFor:"code",helper:"Paste your final snippet. Drafts auto-save while you type.",children:(0,n.jsx)("textarea",{id:"code",name:"code",required:!0,rows:12,placeholder:"// Paste your solution here",className:"auth-input font-mono text-xs leading-relaxed"})}),(0,n.jsx)(s,{label:"Approach notes",htmlFor:"notes",helper:"Explain key optimisations or trade-offs so peers can leave targeted feedback.",children:(0,n.jsx)("textarea",{id:"notes",name:"notes",rows:4,className:"auth-input",placeholder:"Describe your thought process..."})}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("label",{className:"flex items-center gap-2 text-xs text-white/60",children:[(0,n.jsx)("input",{name:"makePublic",type:"checkbox",className:"h-4 w-4 rounded border-white/20 bg-transparent text-accent focus:ring-accent"}),"Make solution public after mentor review"]}),(0,n.jsx)("button",{type:"submit",className:"rounded-full bg-accent px-5 py-2.5 text-sm font-semibold text-accent-foreground transition hover:-translate-y-0.5 hover:bg-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",disabled:l,children:l?"Submittingâ€¦":"Submit for review"})]}),r?(0,n.jsx)("p",{className:"rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-2 text-sm text-red-100",children:r}):null,d?(0,n.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-2 text-sm text-emerald-100",children:d}):null]})}function s(e){let{label:t,htmlFor:l,helper:a,children:i}=e;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:l,className:"text-sm font-semibold text-white/70 transition hover:text-white",children:t}),i,a?(0,n.jsx)("p",{className:"text-xs text-white/45",children:a}):null]})}}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=5629)}),_N_E=e.O()}]);